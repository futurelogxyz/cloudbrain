---
title: äººè„¸è¯†åˆ«æ˜¯å¦‚ä½•å·¥ä½œçš„
date: 2024-01-11
draft: false
tags:
  - face-recognition
  - face-detect
---

åœ¨ [[çŸ­å‰§æ¢è„¸å‡ºæµ·çš„æŠ€æœ¯å¤æ‚æ€§]] ä¸­æˆ‘ä»¬æåˆ°äº†åœºæ™¯ç”»é¢ä¸­ç»å¸¸åŒæ—¶å‡ºç°å¤šä¸ªäººç‰©ï¼Œå¦‚ä½•è¯†åˆ«ä¸åŒäººè„¸ï¼Œæ›¿æ¢ä¸ºå„è‡ªçš„ç›®æ ‡äººè„¸ æˆ–è€…æ˜¯ å®ç°å„ä¸ªäººè„¸çš„å£å‹å¯¹é½ï¼Œæ˜¯æˆ‘ä»¬é¢ä¸´çš„è¾ƒå¤§æŒ‘æˆ˜ã€‚
æˆ‘ä»¬æ¥çœ‹ä¸ªç®€åŒ–çš„ä¾‹å­ï¼Œåœ¨ä¸‹å›¾çš„åœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŠŠå¥³ä¸»è§’çš„äººè„¸æ›¿æ¢ä¸ºé€‰å®šçš„ç›®æ ‡äººè„¸ï¼Œæˆ‘ä»¬è¯¥å¦‚ä½•æ“ä½œï¼Ÿå®ƒå¯èƒ½æ˜¯ä¸€ä¸ªå¤æ‚çš„å¤„ç†æµç¨‹ï¼Œä½†é€šå¸¸æ¥è¯´è¦æ›¿æ¢ä¸€ä¸ªå¯¹è±¡ï¼Œé¦–å…ˆéœ€è¦èƒ½å¤Ÿå…ˆè¯†åˆ«éœ€è¦æ›¿æ¢çš„å¯¹è±¡ï¼Œè¦æ›¿æ¢äººè„¸ï¼Œè‡ªç„¶éœ€è¦é¦–å…ˆèƒ½å¤Ÿè¯†åˆ«éœ€è¦æ›¿æ¢çš„äººè„¸ã€‚
![[face-recognition-howto.excalidraw.png]]

è€Œ **â€œè¯†åˆ«éœ€è¦æ›¿æ¢çš„äººè„¸â€** å°±æ˜¯æˆ‘ä»¬ä»Šå¤©è¦ä»‹ç»çš„â€œ[äººè„¸è¯†åˆ«ï¼ˆface recognitionï¼‰](https://en.wikipedia.org/wiki/Facial_recognition_system)â€æŠ€æœ¯ã€‚

äººè„¸è¯†åˆ« åœ¨å®é™…ç”Ÿæ´»ä¸­æœ‰ç€ä¸°å¯Œçš„åº”ç”¨åœºæ™¯ï¼Œå¦‚æ‰‹æœºçš„ Face ID è§£é”ï¼Œé—¨ç¦ã€æ”¯ä»˜ç­‰å„ç±»å®‰å…¨ç³»ç»Ÿçš„äººè„¸éªŒè¯ç­‰ã€‚ç‰¹åˆ«æ˜¯åœ¨ç›‘æ§è¿½è¸ªé¢†åŸŸæœ‰ç€å¹¿é˜”çš„åº”ç”¨å‰æ™¯å’Œåº”ç”¨ä»·å€¼ï¼Œ[ç¾å‰§ã€Šç–‘çŠ¯è¿½è¸ªã€‹](https://zh.wikipedia.org/zh-hans/%E7%96%91%E7%8A%AF%E8%BF%BD%E8%B8%AA)æ­£åœ¨é€æ­¥æˆä¸ºç°å®ã€‚

![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403022111281.png)
*ç¾å‰§ã€Šç–‘çŠ¯è¿½è¸ªã€‹å‰§ç…§*

é‚£ä¹ˆç©¶ç«Ÿä»€ä¹ˆæ˜¯â€œäººè„¸è¯†åˆ«â€ï¼Ÿäººè„¸è¯†åˆ« å°±æ˜¯ è¯†åˆ«äººè„¸ å•Š......hahaha ğŸ˜œï¼Œä»å­—é¢æ¦‚å¿µä¸Šç¡®å®æ²¡æœ‰å¤ªå¤šå¯è§£é‡Šçš„ï¼Œä¸è¿‡ç›¸ä¿¡é€šè¿‡ä¸‹æ–‡çš„ä»‹ç»ï¼Œå¤§å®¶å¯ä»¥å¯¹äººè„¸è¯†åˆ«ç›¸å…³çš„æŠ€æœ¯æœ‰æ›´æ·±å…¥çš„äº†è§£ã€‚

![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/20240302193955.gif)


## 1. äººè„¸è¯†åˆ«çš„ Pipeline
 
![[face-recognition-pipeline.excalidraw.png]]


### 1.1 Detect æ£€æµ‹
åœ¨ä¸€å¼ å›¾ç‰‡ä¸­ï¼Œé€šå¸¸äººè„¸ï¼ˆå¦‚æœæœ‰çš„è¯ï¼‰åªå‡ºç°åœ¨éƒ¨åˆ†åŒºåŸŸã€‚â€œæ£€æµ‹â€å°±æ˜¯æŒ‡éœ€è¦å‡†ç¡®è¯†åˆ«å‡ºäººè„¸æ‰€åœ¨çš„åŒºåŸŸã€‚å¯ä»¥å½¢è±¡ç†è§£ä¸ºéœ€è¦ç”¨ä¸ªæ–¹æ¡†æŠŠå›¾ç‰‡ä¸­çš„äººè„¸æ¡†å‡ºæ¥ï¼Œå¦‚ä¸‹å›¾æ‰€ç¤ºã€‚
![[face-recognition-detect.excalidraw.png]]
æ£€æµ‹æ­¥éª¤æ˜¯å®ç°äººè„¸è¯†åˆ«çš„ç¬¬ä¸€æ­¥ï¼Œä¹Ÿæ˜¯æœ€å…³é”®çš„æ­¥éª¤ã€‚å¦‚æœéƒ½ä¸èƒ½æ£€æµ‹å‡ºäººè„¸åœ¨å“ªå„¿ï¼Œä½•è°ˆåç»­çš„è¯†åˆ«ã€‚
ç›®å‰å¸¸ç”¨çš„äººè„¸æ£€æµ‹æ–¹æ¡ˆå¯ä»¥åˆ†ä¸ºä¸¤ç±»ï¼š
1. ä¼ ç»Ÿæ£€æµ‹æ–¹æ³•ï¼šæ·±åº¦å­¦ä¹ å‰æ—¶ä»£ï¼Œå¦‚ opencv haar-cascade, dlib HOG ç­‰
2. ç°ä»£æ£€æµ‹æ–¹æ³•ï¼šåŸºäºæ·±åº¦å­¦ä¹ ï¼Œå¦‚ s3fd, SSD, MTCNN, RetinaFace ç­‰
![[face-detectors.excalidrawing.png]]

### 1.1.1 ä¼ ç»Ÿæ£€æµ‹æ–¹æ³• - ä»¥ HOG ä¸ºä¾‹
ä¼ ç»Ÿæ£€æµ‹æ–¹æ³•çš„ä¸»è¦ä¼˜åŠ¿åœ¨äºæ£€æµ‹é€Ÿåº¦å¿«ï¼Œè€—è´¹èµ„æºå°‘ï¼Œä»è€Œèƒ½å¤Ÿåœ¨â€œä½ç«¯â€è®¾å¤‡ï¼ˆå¦‚ä¼ ç»Ÿçš„æ•°ç ç›¸æœºï¼‰ä¸Šè¿è¡Œã€‚æœ¬æ–‡ä¸­æˆ‘ä»¬ä¼šä»‹ç»ä¼ ç»Ÿæ£€æµ‹æ–¹æ³•ä¸­çš„ dlib HOG æ–¹æ³•ã€‚

[HOG, Histogram of Oriented Gradients, æ–¹å‘æ¢¯åº¦ç›´æ–¹å›¾](https://ieeexplore.ieee.org/document/1467360) æ˜¯åœ¨ 2005 å¹´æå‡ºçš„ã€‚ç”±äº HOG æ–¹æ³•å¹¶ä¸åŸºäºå›¾ç‰‡é¢œè‰²æ•°æ®æ¥æ£€æµ‹äººè„¸ï¼Œæ‰€ä»¥ä½¿ç”¨ HOG æ–¹æ³•æ—¶ï¼Œé¦–å…ˆéœ€è¦æŠŠå›¾ç‰‡è½¬æ¢ä¸ºé»‘ç™½ã€‚

![[face-detector-HOG-step1.excalidraw.png]]

 ç„¶åï¼Œæˆ‘ä»¬å°†éå†å›¾ç‰‡ä¸­çš„æ¯ä¸€ä¸ªåƒç´ ã€‚ å¯¹äºæ¯ä¸ªåƒç´ ï¼Œæˆ‘ä»¬æ£€æŸ¥å®ƒå‘¨å›´çš„å…¶ä»–åƒç´ ï¼š
 ![](https://pic4.zhimg.com/80/v2-194c89334b1f66e747952ca5a13f12c7_1440w.webp)

æ¯”è¾ƒå½“å‰åƒç´ ä¸ç›´æ¥å›´ç»•å®ƒçš„åƒç´ çš„æ·±åº¦å€¼ï¼Œç”»ä¸€ä¸ªç®­å¤´ï¼ˆå‘é‡ï¼‰æ¥ä»£è¡¨å›¾åƒå˜æš—çš„æ–¹å‘ï¼š

![](https://pic3.zhimg.com/80/v2-96e64f568d6d48ca0a7f707fec891a8a_1440w.webp)

å¯¹å›¾ç‰‡ä¸­çš„æ¯ä¸ªåƒç´ é‡å¤è¿™ä¸ªè¿‡ç¨‹ï¼Œæœ€ç»ˆæ¯ä¸ªåƒç´ éƒ½ä¼šç”¨ä¸€ä¸ªç®­å¤´ï¼ˆå‘é‡ï¼‰è¡¨ç¤ºï¼Œè¿™äº›ç®­å¤´ï¼ˆå‘é‡ï¼‰ç§°ä¸º **æ¢¯åº¦**ï¼ˆgradientsï¼‰ï¼Œå®ƒä»¬è¡¨ç¤ºäº†å›¾åƒä¸­ä»æ˜äº®åˆ°é»‘æš—çš„æµåŠ¨è¿‡ç¨‹ã€‚
![](https://pic1.zhimg.com/80/v2-8689fae65dee70b69a3957657e4d7f78_1440w.webp)

åœ¨å®é™…å®ç°æ—¶ï¼Œä¿å­˜æ¯ä¸ªåƒç´ çš„æ¢¯åº¦å¤ªè¿‡äºç»†èŠ‚åŒ–äº†ï¼Œæœ‰å¯èƒ½æ•æ‰ä¸åˆ°å›¾åƒçš„æ•´ä½“ä¿¡æ¯ï¼Œå› æ­¤ï¼Œé€šå¸¸å°†å›¾åƒåˆ†å‰²æˆ 8x8 æˆ– 16x16 çš„å°å—ï¼Œè®¡ç®—æ¯ä¸ªå°å—çš„çš„ä¸»æ–¹å‘æ¢¯åº¦ï¼Œä¿ç•™æŒ‡å‘æ€§æœ€å¼ºçš„é‚£ä¸ªã€‚æœ€åçš„ç»“æœå°±æ˜¯å›¾åƒçš„ HOG è¡¨ç¤ºã€‚
![](https://pic2.zhimg.com/80/v2-96c35183fd683842c572e83f023964a9_1440w.webp)

ä¸ºäº†åœ¨å›¾åƒçš„ HOG è¡¨ç¤ºä¸­ï¼Œæ‰¾åˆ°äººè„¸ï¼Œæˆ‘ä»¬éœ€è¦åšçš„åªæ˜¯ä¸è®¸å¤šè„¸éƒ¨ç…§ç‰‡çš„å¹³å‡ HOG è¡¨ç¤ºè¿›è¡Œæ¯”è¾ƒï¼Œæ‰¾å‡ºæœ€ç›¸ä¼¼çš„åŒºåŸŸï¼Œå³ä¸ºäººè„¸åŒºåŸŸï¼Œä»è€ŒæˆåŠŸæ£€æµ‹åˆ°äººè„¸ã€‚
![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403031325697.png)


HOG æ–¹æ³•ç”±äºå…¶å¯¹å±€éƒ¨å½¢çŠ¶ä¿¡æ¯çš„æœ‰æ•ˆæè¿°ï¼Œä»¥åŠå¯¹å…‰ç…§å˜åŒ–çš„ä¸æ•æ„Ÿï¼Œåœ¨äººè„¸æ£€æµ‹é¢†åŸŸå¾—åˆ°äº†å¹¿æ³›çš„åº”ç”¨ã€‚ä½†å®ƒå¯¹å§¿æ€å˜åŒ–å’Œé®æŒ¡çš„å¤„ç†èƒ½åŠ›æœ‰é™ï¼Œå› æ­¤åœ¨åº”ç”¨æ—¶ï¼Œé€šå¸¸ä¼šç»“åˆ[é¢éƒ¨ç‰¹å¾ç‚¹ä¼°è®¡æ–¹æ³•](https://ieeexplore.ieee.org/document/6909637)ç­‰ã€‚å½“å‰é€šå¸¸ä¹Ÿä¼šå’Œç°ä»£çš„æ·±åº¦å­¦ä¹ æ£€æµ‹æ–¹æ³•ç»“åˆï¼Œä»¥æé«˜æ£€æµ‹æ•ˆç‡å’Œå‡†ç¡®ç‡ã€‚
### 1.1.2 ç°ä»£æ£€æµ‹æ–¹æ³•
ç°ä»£åŸºäºæ·±åº¦å­¦ä¹ çš„æ£€æµ‹æ–¹æ³•ï¼Œæ ¸å¿ƒå®ç°éƒ½æ˜¯åŸºäº CNN å·ç§¯ç¥ç»ç½‘ç»œã€‚å·ç§¯ç¥ç»ç½‘ç»œèƒ½å¤Ÿå­¦ä¹ åˆ°å›¾åƒä¸­çš„å·²çŸ¥ç»“æ„ï¼Œæ¯”å¦‚äººè„¸ã€‚
![|400](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403032221780.png)

[s3fd](https://arxiv.org/abs/1708.05237) äººè„¸æ£€æµ‹æ¨¡å‹ç»“æ„å¦‚ä¸‹å›¾æ‰€ç¤ºã€‚å®ç°ç»†èŠ‚å¾…åç»­è®ºæ–‡é˜…è¯»è¡¥å……[#TODO]ã€‚
![|400](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403031336744.png)

### 1.2 Align å¯¹é½
åœ¨çœŸå®ä¸–ç•Œçš„åº”ç”¨åœºæ™¯ä¸­ï¼Œäººè„¸å›¾åƒå¯èƒ½ä¼šå› ä¸ºå¤´éƒ¨çš„ä¸åŒå§¿æ€ï¼ˆå¦‚åè½¬ã€å€¾æ–œæˆ–ä¿¯ä»°ï¼‰è€Œå‡ºç°å˜åŒ–ã€‚äººè„¸å¯¹é½é€šè¿‡æ—‹è½¬ã€ç¼©æ”¾å’Œè£å‰ªç­‰æ“ä½œï¼Œå°†è¿™äº›äººè„¸å›¾åƒè°ƒæ•´åˆ°ä¸€ä¸ªæ ‡å‡†çš„å§¿æ€ï¼Œä»è€Œå‡å°‘å§¿æ€å·®å¼‚å¯¹è¯†åˆ«æ€§èƒ½çš„å½±å“ã€‚Google åœ¨ [FaceNet](https://arxiv.org/abs/1503.03832)ä¸­çš„ç ”ç©¶çš„è¡¨æ˜ï¼Œé€šè¿‡ Align æ“ä½œå¯ä»¥å°†äººè„¸è¯†åˆ«çš„å‡†ç¡®ç‡ä»98.87% æå‡åˆ° 99.63%ï¼Œæå‡è¿‘ 1%ã€‚ä¸‹å›¾å±•ç¤ºçš„ æ—‹è½¬æ“ä½œã€‚

![[face-recognition-alignment.excalidraw.png]]
### 1.3 Normalize æ ‡å‡†åŒ–
æ ‡å‡†åŒ–æ˜¯æŒ‡é€šè¿‡ 68 ä¸ªé¢éƒ¨ç‰¹å¾ç‚¹ï¼ˆ[dlib](http://dlib.net/face_landmark_detection.py.html)åº“åŒ…å«ç›´æ¥å¯ç”¨çš„ API æ¥è¯†åˆ«è¿™äº›ç‰¹å¾ç‚¹ï¼‰ï¼Œæ ‡è¯†å‡ºä¸‹å·´å’Œä¸‹é¢Œçº¿ã€çœ‰æ¯›ã€é¼»å­ã€çœ¼ç›å’Œå˜´å”‡ã€‚

![ face landmark | center | 300](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403031517707.png)

åŸºäºè¿™äº›ç‰¹å¾ç‚¹ï¼Œæå–å‡†ç¡®çš„é¢éƒ¨åŒºåŸŸã€‚è¿™å°†å¤§å¤§æé«˜äººè„¸è¯†åˆ«æ¨¡å‹çš„å‡†ç¡®æ€§ï¼Œå› ä¸ºæˆ‘ä»¬å°†é€šè¿‡è¿™ç§æ–¹å¼æ‘’å¼ƒå…¶ä»–éè„¸éƒ¨çš„å™ªéŸ³æ•°æ®ã€‚ 
![[face-recognition-normalize.excalidraw]]

> è¡¥å……è¯´æ˜ï¼šåŸºäºé¢éƒ¨ç‰¹å¾ç‚¹ä¹Ÿå¯ä»¥å¯¹äººè„¸è¿›è¡Œå¯¹é½æ ¡æ­£ï¼Œæ¯”å¦‚ä¾§è„¸æ ¡æ­£ã€‚
> 
### 1.4 Represent è¡¨ç¤º

åœ¨ä¸Šæ–‡çš„ [[#1.1.1 ä¼ ç»Ÿæ£€æµ‹æ–¹æ³• - ä»¥ HOG ä¸ºä¾‹]] ä¸­ï¼Œæˆ‘ä»¬å±•ç¤ºäº†äººè„¸çš„ HOG è¡¨ç¤ºã€‚åœ¨å½“å‰ä¸»æµçš„åŸºäºæ·±åº¦å­¦ä¹ çš„æ–¹æ³•ä¸­ï¼Œæˆ‘ä»¬å¦‚ä½•è¡¨ç¤ºå’Œå­˜å‚¨äººè„¸æ•°æ®å‘¢ï¼Ÿåˆè¯¥è½®åˆ°æˆ‘ä»¬ç†Ÿæ‚‰çš„ [Embedding]() å‡ºåœºäº†ã€‚

ä¸‹å›¾å±•ç¤ºäº†äººè„¸è¯†åˆ«åˆ†ç±»æ¨¡å‹ [VGG-Face](https://www.robots.ox.ac.uk/~vgg/publications/2015/Parkhi15/poster.pdf) çš„æ¨¡å‹ç»“æ„ã€‚ç”±äºæ¨¡å‹çš„ç›®æ ‡æ˜¯å¤šåˆ†ç±»ï¼ˆ2622 ç±»ï¼‰ï¼Œå› æ­¤å€’æ•°ç¬¬äºŒå±‚è¾“å‡ºæ˜¯ 2622 ç»´ï¼Œæœ€åä¸€å±‚æ˜¯ softmaxï¼ˆç»è¿‡Softmaxå‡½æ•°åï¼Œæ‰€æœ‰è¾“å‡ºæ¦‚ç‡çš„æ€»å’Œä¸º1ï¼‰ã€‚
![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403031556816.png)

è¿™é‡Œå€¼å¾—æ³¨æ„çš„æ˜¯å€’æ•°ç¬¬ä¸‰å±‚ï¼Œå®ƒçš„è¾“å‡ºæ˜¯ä¸€ä¸ª 4096 ç»´çš„ embedding å‘é‡ï¼Œå®ƒå³ä¸ºä¸€ä¸ªäººè„¸å›¾åƒçš„ embedding å‘é‡è¡¨ç¤ºã€‚å¦‚ä¸‹å›¾æ‰€ç¤ºï¼š

![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/202403030955234.png)

ç›®å‰æ‰€æœ‰åŸºäºæ·±åº¦å­¦ä¹ çš„äººè„¸è¯†åˆ«ç³»ç»Ÿï¼Œæœ€ç»ˆéƒ½ä¼šå°†äººè„¸è½¬æ¢ä¸º embedding å‘é‡æ¥è¡¨ç¤ºã€‚è¿™æ ·å¯¹äººè„¸çš„è¯†åˆ«éªŒè¯é—®é¢˜å°±å¯ä»¥è½¬æ¢ä¸º embedding å‘é‡çš„ç›¸ä¼¼åº¦è®¡ç®—é—®é¢˜ã€‚
![](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/angelina-face-represent-embedding.png)

### 1.5 Verify éªŒè¯
åœ¨ä¸Šä¸€èŠ‚æåˆ°äº†åœ¨å¾—åˆ°äº†äººè„¸çš„ embedding å‘é‡è¡¨ç¤ºåï¼Œæˆ‘ä»¬å°±å¯ä»¥å°†äººè„¸çš„è¯†åˆ«éªŒè¯é—®é¢˜ï¼Œå¯ä»¥è½¬æ¢ä¸º embedding å‘é‡çš„ç›¸ä¼¼åº¦è®¡ç®—é—®é¢˜ã€‚å¯¹äºå°è§„æ¨¡æ•°æ®é‡çš„ embedding å‘é‡ç›¸ä¼¼åº¦è®¡ç®—é—®é¢˜ï¼Œå¯ä»¥é€šè¿‡è®¡ç®—  Cosine ä½™å¼¦ï¼ŒEuclidean Distance æ¬§å¼è·ç¦» ç­‰æ–¹å¼æ±‚è§£ï¼›ä½†å¯¹äºè¾ƒå¤§è§„æ¨¡é‡çº§çš„ embedding å‘é‡ç›¸ä¼¼åº¦è®¡ç®—é—®é¢˜ï¼Œæˆ‘ä»¬é€šå¸¸åŸºäº  [Facebook Faiss](https://github.com/facebookresearch/faiss)  æˆ– ä¸“ç”¨çš„å‘é‡æ•°æ®åº“ï¼ˆ[milvus](https://milvus.io/) ï¼Œ[Pinecone](https://www.pinecone.io/))ç­‰å®ç°ã€‚

$$
Cosine\ Similarity =  \cos(\theta) = \frac{\mathbf{A} \cdot \mathbf{B}}{\|\mathbf{A}\| \|\mathbf{B}\|}
$$

$$
Euclidean\ Distance =  \sqrt{\sum_{i=1}^{k} (x_i - y_i)^2}

$$
é€šè¿‡ä»¥ä¸Šå…¬å¼ï¼Œæˆ‘ä»¬å¯ä»¥è®¡ç®—å¾—åˆ°å‘é‡ç›¸ä¼¼åº¦çš„å€¼ï¼Œä½†å›åˆ°æˆ‘ä»¬çš„äººè„¸è¯†åˆ«éªŒè¯é—®é¢˜ï¼Œæ ¹æ®è®¡ç®—å¾—åˆ°çš„å€¼ï¼Œæˆ‘ä»¬å¦‚ä½•åˆ¤æ–­ä¸¤ä¸ªäººè„¸æ˜¯å¦æ˜¯åŒä¸€ä¸ªäººçš„æˆ–è€…æœ‰å¤šå¤§ç¨‹åº¦æ˜¯åŒä¸€ä¸ªäººçš„å‘¢ï¼Ÿè¿™éœ€è¦æˆ‘ä»¬ç¡®å®šå‘é‡ç›¸ä¼¼åº¦çš„é˜ˆå€¼ï¼Œåªæœ‰å½“å¤§äºï¼ˆæˆ–å°äºï¼‰é˜ˆå€¼æ—¶ï¼Œæˆ‘ä»¬æ‰è®¤ä¸ºæ˜¯åŒä¸€ä¸ªäººçš„äººè„¸ã€‚é˜ˆå€¼çš„ç¡®å®š
![image.png](https://futurelog-1251943639.cos.accelerate.myqcloud.com/img/20240303170422.png)

## 2. äººè„¸è¯†åˆ«åº”ç”¨å®è·µ
æˆ‘ä»¬å›åˆ°å…³äº çŸ­å‰§æ¢è„¸å‡ºæµ· çš„éœ€æ±‚ä¸Šï¼Œ åœ¨ä¸Šæ–‡ä¸­æˆ‘ä»¬ä¸»è¦ä»‹ç»äº†æ¢è„¸è¿‡ç¨‹ä¸­äººè„¸è¯†åˆ«ç›¸å…³çš„æŠ€æœ¯ï¼Œæ¢è„¸ç›®å‰é€šè¿‡ [facefusion](https://github.com/facefusion/facefusion)ç­‰å¼€æºæ–¹æ¡ˆä¹Ÿå¯ä»¥å¾—åˆ°ç›¸å¯¹è¿˜å¯æ¥å—çš„æ•ˆæœã€‚
ä½†åœ¨çŸ­å‰§æ¢è„¸å‡ºæµ·æ—¶ï¼Œè¿˜éœ€è¦è§£å†³åœ¨å¤šäººåœºæ™¯ä¸­è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½çš„é—®é¢˜ã€‚æ¯”å¦‚å¦‚æœè¦å¯¹ä¸‹é¢çš„[çŸ­å‰§ç‰‡æ®µ](https://player.bilibili.com/player.html?aid=1051365200&bvid=BV1nH4y1j7nA&cid=1456584038&p=1&autoplay=0)ä¸­ï¼Œå¦‚æœæˆ‘ä»¬è¦å°†ç©¿ç™½è‰²è£™å­çš„å¥³ä¸€å·çš„è¯­éŸ³æ”¹ä¸ºè‹±è¯­ï¼Œç”±äºå¥³ä¸€å·ç»å¸¸ä¸å…¶ä»–è§’è‰²åŒæ—¶å‡ºç°åœ¨ç”»é¢ä¸­ï¼Œå› æ­¤æˆ‘ä»¬åœ¨æ¯ä¸€å¸§ç”»é¢ä¸­æˆ‘ä»¬é¦–å…ˆè¦èƒ½ç²¾å‡†è¯†åˆ«åˆ°å¥³ä¸€å·çš„äººè„¸ï¼Œåœ¨æ­¤åŸºç¡€ä¸Šæ‰èƒ½ç»§ç»­åº”ç”¨è¯­éŸ³é©±åŠ¨å£å‹æŠ€æœ¯ã€‚

<iframe src="https://player.bilibili.com/player.html?aid=1051365200&bvid=BV1nH4y1j7nA&cid=1456584038&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height=400> </iframe>

æ­£å¦‚åœ¨ [[çŸ­å‰§æ¢è„¸å‡ºæµ·çš„æŠ€æœ¯å¤æ‚æ€§]] ä¸­æåˆ°çš„ï¼Œä¸Šè¿°çŸ­å‰§ç‰‡æ®µè¦å®ç°è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½å¤æ‚æ€§è¿‡é«˜ï¼Œæˆ‘ä»¬æ¥çœ‹ä¸ªç®€åŒ–ç‰ˆçš„ä¾‹å­ã€‚
ä¸‹é¢çš„[è§†é¢‘ç‰‡æ®µ](https://player.bilibili.com/player.html?aid=1001308655&bvid=BV19x4y1r7Th&cid=1457955765&p=1&autoplay=0)æ˜¯ä¸¤ä¸ªäººæ­£åœ¨å¯¹è°ˆï¼Œå¹¶ä¸”éƒ½æ˜¯ä¸€ç›´æ­£è„¸å‡ºç°åœ¨è§†é¢‘ç”»é¢ä¸­ï¼Œè¿™æ ·æˆ‘ä»¬å®ç°åˆ†åˆ«é’ˆå¯¹å·¦è¾¹äººç‰©å’Œå³è¾¹äººç‰©çš„è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½æ—¶ï¼Œç›¸æ¯”ä¸ä¸Šè¿°çŸ­å‰§åœºæ™¯è¦ç®€å•å¾ˆå¤šã€‚

<iframe src="https://player.bilibili.com/player.html?aid=1001308655&bvid=BV19x4y1r7Th&cid=1457955765&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height=400> </iframe>

åœ¨å•äººåœºæ™¯ä¸­ï¼Œä½¿ç”¨ [sd-wav2lip-uhq](https://github.com/numz/sd-wav2lip-uhq)ç­‰å¼€æºæ–¹æ¡ˆå®ç°è§†é¢‘ä¸­äººç‰©çš„è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½ï¼Œå¯ä»¥è¾¾åˆ°è¾ƒå¥½çš„æ•ˆæœï¼Œå…·ä½“æ•ˆæœè§é¡¹ç›®ä¸­çš„ç¤ºä¾‹ã€‚é‚£æ˜¯ä¸æ˜¯åŸºäº [sd-wav2lip-uhq](https://github.com/numz/sd-wav2lip-uhq) æ”¹é€ ä¸‹ä»¥æ”¯æŒå¤šäººåœºæ™¯å‘¢ï¼Ÿ
åœ¨ [sd-wav2lip-uhq](https://github.com/numz/sd-wav2lip-uhq) çš„å¤„ç†æµç¨‹ä¸­ï¼Œç”±äºæ˜¯å•äººåœºæ™¯ï¼Œå®ƒåªéœ€è¦è¯†åˆ«å‡ºæ¯å¸§å›¾åƒä¸­çš„äººè„¸åŒºåŸŸï¼Œç„¶ååœ¨è¯¥åŒºåŸŸåº”ç”¨è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½æŠ€æœ¯ï¼Œå¹¶ä¸éœ€è¦è¯†åˆ«å‡ºå…·ä½“æ˜¯è°çš„äººè„¸ã€‚
åœ¨å¤šäººåœºæ™¯ä¸­ï¼Œæˆ‘ä»¬éœ€è¦æŒ‡å®šè¦å¯¹å“ªä¸ªäººè„¸åº”ç”¨è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½ï¼Œä¸ç„¶åƒ  [sd-wav2lip-uhq](https://github.com/numz/sd-wav2lip-uhq) æ–¹æ¡ˆé»˜è®¤ä¼šå¯¹æ‰¾åˆ°çš„ç¬¬ä¸€ä¸ªäººè„¸åº”ç”¨è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½ ã€‚
æ‰€ä»¥ï¼Œæ”¹é€   [sd-wav2lip-uhq](https://github.com/numz/sd-wav2lip-uhq) æ–¹æ¡ˆä»¥æ”¯æŒå¤šäººåœºæ™¯ä¸»è¦å·¥ä½œå°±æ˜¯éœ€è¦æ‰¾å‡ºæ¯å¸§å›¾åƒä¸­çš„æ‰€æœ‰äººè„¸ï¼Œå¹¶ä¸”å‡†ç¡®è¯†åˆ«è¦åº”ç”¨è¯­éŸ³é©±åŠ¨å£å‹å¯¹é½çš„æŒ‡å®šäººè„¸ã€‚

![[sd-wav2lip-uhq-multiple-face-pipeline.excalidraw.png]]

å…·ä½“å®ç°è§ [sd-wav2lip-uhq-multiple-face](https://github.com/crowaixyz/sd-wav2lip-uhq-multiple-face/commit/5f44eb33b155d2dc2f682f3ce63b5b18d0a5beef#diff-d00bf1eec1f6941965a8857a312a4b06635709fd8f5fd5b3445a54d1a464a86e)ã€‚å®ç°æ•ˆæœå¦‚ä¸‹é¢ä¸¤ä¸ªè§†é¢‘æ‰€ç¤ºã€‚

- [æŒ‡å®šå·¦è¾¹äººç‰©](https://player.bilibili.com/player.html?aid=1251257972&bvid=BV1yJ4m1a7bA&cid=1457958106&p=1&autoplay=0)ï¼š

<iframe src="https://player.bilibili.com/player.html?aid=1251257972&bvid=BV1yJ4m1a7bA&cid=1457958106&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height=400> </iframe>

- [æŒ‡å®šå³è¾¹äººç‰©](https://player.bilibili.com/player.html?aid=1151400396&bvid=BV1PZ421a7Xc&cid=1457958640&p=1&autoplay=0)ï¼š

<iframe src="https://player.bilibili.com/player.html?aid=1151400396&bvid=BV1PZ421a7Xc&cid=1457958640&p=1&autoplay=0" scrolling="no" border="0" frameborder="no" framespacing="0" allowfullscreen="true" height=400 autoplay=false> </iframe>


## 3. äººè„¸è¯†åˆ«å¼€æºå·¥å…·
å®ç°äººè„¸è¯†åˆ«çš„å¼€æºå·¥å…·è¾ƒå¤šï¼Œå¦‚  [Deepface](https://github.com/serengil/deepface)ï¼Œ[insightface](https://github.com/deepinsight/insightface)ï¼Œ[face-recognition](https://github.com/ageitgey/face_recognition)ï¼ŒVGG_Faceï¼ŒGoogle Facenetï¼ŒOpenFaceï¼Œ Dlib ç­‰ã€‚

[Deepface](https://github.com/serengil/deepface)æ˜¯ä¸ªåŠŸèƒ½å¼ºå¤§çš„è½»é‡çº§ Python åº“ï¼Œé™¤äº†äººè„¸è¯†åˆ«åŠŸèƒ½ï¼Œè¿˜å¯ä»¥è¿›è¡Œï¼ˆå®æ—¶ï¼‰äººè„¸å±æ€§åˆ†æã€‚å…·ä½“ä½¿ç”¨ç¤ºä¾‹è§ï¼š[face-recognition-demo-with-deepface.ipynb](https://colab.research.google.com/drive/12xq7y26TN2Z6QRGGDhtpB5xLXHzMyoFd#scrollTo=MfDgj9NzzlLo)


## å‚è€ƒèµ„æ–™ï¼š
- [Deepface](https://github.com/serengil/deepface)
- [DeepFace â€“ The Most Popular Open Source Facial Recognition Library](https://viso.ai/computer-vision/deepface/)
- [Modern Face Recognition with Deep Learning](https://medium.com/@ageitgey/machine-learning-is-fun-part-4-modern-face-recognition-with-deep-learning-c3cffc121d78#.ugpgrc4eq)
- [face-recognition](https://github.com/ageitgey/face_recognition)
